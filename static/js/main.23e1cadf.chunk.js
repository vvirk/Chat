(window.webpackJsonpchat=window.webpackJsonpchat||[]).push([[0],{29:function(e,a,t){e.exports=t.p+"static/media/Spinner.315ddeed.svg"},30:function(e,a,t){e.exports=t.p+"static/media/avatar.0a5e7a1f.png"},37:function(e,a,t){e.exports=t(50)},48:function(e,a,t){},50:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(13),c=t.n(r),m=t(10),i=t(9),l=t(4),o=t(15),u=function(e){var a=Object(n.useState)(""),t=Object(o.a)(a,2),r=t[0],c=t[1],i=e.addUserName;return s.a.createElement("div",{className:"login-wrap"},s.a.createElement("div",{className:"login-inner"},s.a.createElement("input",{type:"text",className:"user-name-input message-input",onChange:function(e){return c(e.target.value)},placeholder:"Please, enter your name"}),s.a.createElement(m.b,{to:r?"/chat":"#",className:"login-btn message-input-btn",onClick:function(){return i(r)}},"Login")))},g=t(20),p=t.n(g),d=t(25),f=function(e){return{type:"TOGGLE_IS_FETSHING",isFetching:e}},E={addUserName:function(e){return{type:"ADD_USER_NAME",userName:e}}},v=Object(l.b)(function(e){return{}},E)(u),h=t(26),N=t(27),b=t(35),y=t(28),O=t(36),w=t(29),j=t.n(w),S=function(){return s.a.createElement("div",{className:"preloader-wrap"},s.a.createElement("div",{className:"preloader-inner"},s.a.createElement("img",{src:j.a,alt:"Spinner"})))},k=function(e){var a=e.messages;return s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"header-inner"},s.a.createElement("div",{className:"header-logo"},"My chat"),s.a.createElement("div",{className:"header-chat-info"},s.a.createElement("div",{className:"header-chat-info-number-of"},function(e){var a=new Set;if(e)return e.map(function(e){return a.add(e.user)}),a.size}(a)," users \xa0",a.length," messages"),s.a.createElement("div",{className:"header-chat-info-last-message"},"Last message: ",function(e){var a=e.length-1;if(e[a])return e[a].created_at}(a))))))},M=Object(l.b)(function(e){return{messages:e.messages}},{})(k),_=function(e){return s.a.createElement("li",{className:e.classWrap},s.a.createElement("div",{className:e.classMessage},s.a.createElement("div",{className:"message-time"},e.createdTime),s.a.createElement("div",{className:"message-inner"},s.a.createElement("div",{className:"message-info"},s.a.createElement("div",{className:e.classAvatar},s.a.createElement("img",{src:e.avatar,alt:"avatar"})),s.a.createElement("div",{className:"message-desc"},s.a.createElement("h2",{className:"message-title"},e.name),s.a.createElement("div",{className:"message-body"},e.message))),s.a.createElement("div",{className:e.classLikeWrap},s.a.createElement("button",{className:"message-like"},"\u2764")))))},D=t(30),A=t.n(D),x=function(e){var a=e.messages;return s.a.createElement("section",{className:"chat-list"},s.a.createElement("div",{className:"content"},a?s.a.createElement("ul",{className:"messages-list"},a.map(function(a){return s.a.createElement(_,{classWrap:a.user===e.userName?"message-wrap my-message-wrap":"message-wrap",classMessage:a.user===e.userName?"message my-message":"message",classLikeWrap:a.user===e.userName?"display-none":"message-like-wrap",classAvatar:a.user===e.userName?"display-none":"avatar",key:a.id,avatar:a.avatar?a.avatar:A.a,createdTime:a.created_at,name:a.user,message:a.message})})):null))},F=Object(l.b)(function(e){return{messages:e.messages,newMessage:e.newMessage,userName:e.userName}},{})(x),G=function(e){var a=Object(n.useState)(""),t=Object(o.a)(a,2),r=t[0],c=t[1],m=e.addNewMessage;return s.a.createElement("div",{className:"message-input-wrap"},s.a.createElement("div",{className:"message-input-content"},s.a.createElement("input",{className:"message-input",type:"text",onChange:function(e){return c(e.target.value)},onKeyUp:function(e){return 13===e.keyCode&&r?m(r)&&c(""):null},value:r,placeholder:"Type something..."}),s.a.createElement("button",{className:"message-input-btn",onClick:function(){return r?m(r)&&c(""):null}},"send")))},P={addNewMessage:function(e){return{type:"ADD_NEW_MESSAGE",message:e}}},C=Object(l.b)(function(e){return{messages:e.messages}},P)(G),W=function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"footer-inner"},s.a.createElement("nav",{className:"footer-nav"},s.a.createElement("a",{className:"footer-nav-link",href:"#"},"Home"),s.a.createElement("a",{className:"footer-nav-link",href:"#"},"About"),s.a.createElement("a",{className:"footer-nav-link",href:"#"},"Contact us")),s.a.createElement("div",{className:"copyright"},"@ Copyright 2019"))))},T=function(e){function a(){return Object(h.a)(this,a),Object(b.a)(this,Object(y.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(N.a)(a,[{key:"componentDidMount",value:function(){this.props.getMessages()}},{key:"render",value:function(){var e=this.props.isFetching;return s.a.createElement("div",{className:"chat-wrap"},e?s.a.createElement(S,null):null,s.a.createElement("main",{className:"main"},s.a.createElement(M,null),s.a.createElement(F,null),s.a.createElement(C,null)),s.a.createElement(W,null))}}]),a}(s.a.Component),I={getMessages:function(){return function(){var e=Object(d.a)(p.a.mark(function e(a){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(f(!0)),"https://api.dev.buki.com.ua/frontend_test",e.next=5,fetch("https://api.dev.buki.com.ua/frontend_test");case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,a({type:"ADD_MESSAGES",messages:n}),a(f(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(a){return e.apply(this,arguments)}}()},toggleIsFetching:f},L=Object(i.e)(Object(l.b)(function(e){return{isFetching:e.isFetching,messages:e.messages}},I)(T)),H=function(){return s.a.createElement(m.a,null,s.a.createElement(i.a,{path:"/",exact:!0,component:v}),s.a.createElement(i.a,{path:"/chat",exact:!0,component:L}))};t(48);var U=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(H,null))},Y=t(12),B=t(31),J=t(34),R=t(32),z=t(33);function K(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function $(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?K(t,!0).forEach(function(a){Object(R.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var q={messages:!1,isFetching:!1,newMessage:"",userName:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_USER_NAME":return $({},e,{userName:a.userName});case"ADD_MESSAGES":return $({},e,{messages:a.messages});case"TOGGLE_IS_FETSHING":return $({},e,{isFetching:a.isFetching});case"ADD_NEW_MESSAGE":var t=e.messages.length-1;return $({},e,{messages:[].concat(Object(J.a)(e.messages),[{message:a.message,user:e.userName,id:+[e.messages[t].id]+1,created_at:z().format("YYYY-MM-D HH:mm:ss")}])});default:return e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(){return Object(Y.c)(Q,q,Object(Y.a)(B.a))}t.d(a,"configureStore",function(){return V}),t.d(a,"store",function(){return X});var X=V();c.a.render(s.a.createElement(l.a,{store:X},s.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.23e1cadf.chunk.js.map