(window.webpackJsonpchat=window.webpackJsonpchat||[]).push([[0],{11:function(e,a,t){e.exports={wrap:"Footer_wrap__2TAji",inner:"Footer_inner__l97wy",nav:"Footer_nav__YglWe",navLink:"Footer_navLink__3hU9B",copyright:"Footer_copyright__3ipED","nav-link":"Footer_nav-link__2bfI6"}},12:function(e,a,t){e.exports={inner:"Header_inner__2rzD1",wrap:"Header_wrap__323Ed",logo:"Header_logo__1On6H",chatInfo:"Header_chatInfo__1Ai6u",chatInfoNumberOf:"Header_chatInfoNumberOf__3EGpr",chatInfoLastMessage:"Header_chatInfoLastMessage__1X1R8"}},16:function(e,a,t){e.exports={wrap:"Login_wrap__1maWs",inner:"Login_inner__DuZ0e",input:"Login_input__3J7qI",btn:"Login_btn__lq-HH"}},17:function(e,a,t){e.exports={wrap:"MessageInput_wrap__1sEft",content:"MessageInput_content__1WO4E",input:"MessageInput_input__2pOzp",btn:"MessageInput_btn__17lhZ"}},2:function(e,a,t){e.exports={wrap:"Message_wrap__3cCAd",message:"Message_message__8rwGc",inner:"Message_inner__6_mus",time:"Message_time__1b142",info:"Message_info__2276t",desc:"Message_desc__3csGN",title:"Message_title__1oiQ5",body:"Message_body__1CEZI",messageLike:"Message_messageLike__1F8pn",messageLikeWrap:"Message_messageLikeWrap__Iw79J",like:"Message_like__2ShJA",myMessage:"Message_myMessage__1Ex2g",myMessageWrap:"Message_myMessageWrap__sbHAA",avatar:"Message_avatar__kxtqF"}},27:function(e,a,t){e.exports={wrap:"Preloader_wrap__1sVqL",inner:"Preloader_inner__2VW6Y"}},36:function(e,a,t){e.exports=t.p+"static/media/Spinner.315ddeed.svg"},37:function(e,a,t){e.exports=t.p+"static/media/avatar.0a5e7a1f.png"},43:function(e,a,t){e.exports=t(56)},54:function(e,a,t){},56:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(19),c=t.n(r),i=t(13),o=t(10),l=t(3),m=t(21),u=t(16),g=t.n(u),_=function(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),r=t[0],c=t[1],o=e.addUserName;return s.a.createElement("div",{className:g.a.wrap},s.a.createElement("div",{className:g.a.inner},s.a.createElement("input",{type:"text",className:g.a.input,onChange:function(e){return c(e.target.value)},placeholder:"Please, enter your name"}),s.a.createElement(i.b,{to:r?"/chat":"#",className:g.a.btn,onClick:function(){return o(r)}},"Login")))},p=t(26),d=t.n(p),f=t(32),E=function(e){return{type:"TOGGLE_IS_FETSHING",isFetching:e}},v={addUserName:function(e){return{type:"ADD_USER_NAME",userName:e}}},h=Object(l.b)(function(e){return{}},v)(_),N=t(33),b=t(34),M=t(41),w=t(35),O=t(42),k=t(27),y=t.n(k),j=t(36),L=t.n(j),I=function(){return s.a.createElement("div",{className:y.a.wrap},s.a.createElement("div",{className:y.a.inner},s.a.createElement("img",{src:L.a,alt:"Spinner"})))},S=t(12),A=t.n(S),D=function(e){var a=e.messages;return s.a.createElement("header",{className:A.a.wrap},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:A.a.inner},s.a.createElement("div",{className:A.a.logo},"My chat"),s.a.createElement("div",{className:A.a.chatInfo},s.a.createElement("div",{className:A.a.chatInfoNumberOf},function(e){var a=new Set;if(e)return e.map(function(e){return a.add(e.user)}),a.size}(a)," users \xa0",a.length," messages"),s.a.createElement("div",{className:A.a.chatInfoLastMessage},"Last message: ",function(e){var a=e.length-1;if(e[a])return e[a].created_at}(a))))))},x=Object(l.b)(function(e){return{messages:e.messages}},{})(D),F=t(2),W=t.n(F),G=function(e){var a=e.toggleLike,t=e.likeMessages;return s.a.createElement("li",{className:e.classWrap},s.a.createElement("div",{className:e.classMessage},s.a.createElement("div",{className:W.a.time},e.createdTime),s.a.createElement("div",{className:W.a.inner},s.a.createElement("div",{className:W.a.info},s.a.createElement("div",{className:e.classAvatar},s.a.createElement("img",{src:e.avatar,alt:"avatar"})),s.a.createElement("div",{className:W.a.desc},s.a.createElement("h2",{className:W.a.title},e.name),s.a.createElement("div",{className:W.a.body},e.message))),s.a.createElement("div",{className:e.classLikeWrap},s.a.createElement("button",{className:t.includes(e.id)?"".concat(W.a.messageLike," ").concat(W.a.like):W.a.messageLike,onClick:function(e){return a(e.target.id)},id:e.id},"\u2665")))))},H={toggleLike:function(e){return{type:"TOGGLE_LIKE",id:e}}},C=Object(l.b)(function(e){return{likeMessages:e.likeMessages}},H)(G),P=t(37),T=t.n(P),U=function(e){var a=e.messages;return s.a.createElement("section",{className:"chat-list"},s.a.createElement("div",{className:"content"},a?s.a.createElement("ul",{className:"messages-list"},a.map(function(a){return s.a.createElement(C,{classWrap:a.user===e.userName?"".concat(W.a.wrap," ").concat(W.a.myMessageWrap):W.a.wrap,classMessage:a.user===e.userName?"".concat(W.a.message," ").concat(W.a.myMessage):W.a.message,classLikeWrap:a.user===e.userName?"display-none":W.a.messageLikeWrap,classAvatar:a.user===e.userName?"display-none":W.a.avatar,key:a.id,id:a.id,avatar:a.avatar?a.avatar:T.a,createdTime:a.created_at,name:a.user,message:a.message})})):null))},Y=Object(l.b)(function(e){return{messages:e.messages,newMessage:e.newMessage,userName:e.userName}},{})(U),J=t(17),q=t.n(J),z=function(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),r=t[0],c=t[1],i=e.addNewMessage;return s.a.createElement("div",{className:q.a.wrap},s.a.createElement("div",{className:q.a.content},s.a.createElement("input",{className:q.a.input,type:"text",onChange:function(e){return c(e.target.value)},onKeyUp:function(e){return 13===e.keyCode&&r?i(r)&&c(""):null},value:r,placeholder:"Type something..."}),s.a.createElement("button",{className:q.a.btn,onClick:function(){return r?i(r)&&c(""):null}},"send")))},B={addNewMessage:function(e){return{type:"ADD_NEW_MESSAGE",message:e}}},K=Object(l.b)(function(e){return{messages:e.messages}},B)(z),R=t(11),Z=t.n(R),V=function(){return s.a.createElement("footer",{className:Z.a.wrap},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:Z.a.inner},s.a.createElement("nav",{className:Z.a.nav},s.a.createElement("a",{className:Z.a.navLink,href:"#"},"Home"),s.a.createElement("a",{className:Z.a.navLink,href:"#"},"About"),s.a.createElement("a",{className:Z.a.navLink,href:"#"},"Contact us")),s.a.createElement("div",{className:Z.a.copyright},"@ Copyright 2019"))))},Q=function(e){function a(){return Object(N.a)(this,a),Object(M.a)(this,Object(w.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.getMessages()}},{key:"render",value:function(){var e=this.props.isFetching;return s.a.createElement("div",{className:"chat-wrap"},e?s.a.createElement(I,null):null,s.a.createElement("main",{className:"main"},s.a.createElement(x,null),s.a.createElement(Y,null),s.a.createElement(K,null)),s.a.createElement(V,null))}}]),a}(s.a.Component),X={getMessages:function(){return function(){var e=Object(f.a)(d.a.mark(function e(a){var t,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(E(!0)),"https://api.dev.buki.com.ua/frontend_test",e.next=5,fetch("https://api.dev.buki.com.ua/frontend_test");case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,a({type:"ADD_MESSAGES",messages:n}),a(E(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(a){return e.apply(this,arguments)}}()},toggleIsFetching:E},$=Object(o.e)(Object(l.b)(function(e){return{isFetching:e.isFetching,messages:e.messages}},X)(Q)),ee=function(){return s.a.createElement(i.a,null,s.a.createElement(o.a,{path:"/",exact:!0,component:h}),s.a.createElement(o.a,{path:"/chat",exact:!0,component:$}))};t(54);var ae=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(ee,null))},te=t(15),ne=t(38),se=t(18),re=t(39),ce=t(40);function ie(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ie(t,!0).forEach(function(a){Object(re.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var le={messages:!1,isFetching:!1,newMessage:"",userName:!1,likeMessages:[]},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_USER_NAME":return oe({},e,{userName:a.userName});case"ADD_MESSAGES":return oe({},e,{messages:a.messages});case"TOGGLE_IS_FETSHING":return oe({},e,{isFetching:a.isFetching});case"ADD_NEW_MESSAGE":var t=e.messages.length-1;return oe({},e,{messages:[].concat(Object(se.a)(e.messages),[{message:a.message,user:e.userName,id:+[e.messages[t].id]+1,created_at:ce().format("YYYY-MM-D HH:mm:ss")}])});case"TOGGLE_LIKE":if(e.likeMessages.includes(a.id)){var n=e.likeMessages.indexOf(a.id);return oe({},e,{likeMessages:[].concat(Object(se.a)(e.likeMessages.slice(0,n)),Object(se.a)(e.likeMessages.slice(n+1)))})}return oe({},e,{likeMessages:[].concat(Object(se.a)(e.likeMessages),[a.id])});default:return e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(){return Object(te.c)(me,le,Object(te.a)(ne.a))}t.d(a,"configureStore",function(){return ue}),t.d(a,"store",function(){return ge});var ge=ue();c.a.render(s.a.createElement(l.a,{store:ge},s.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.3be12ea2.chunk.js.map