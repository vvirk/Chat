(window.webpackJsonpchat=window.webpackJsonpchat||[]).push([[0],{12:function(e,a,t){e.exports={wrap:"Footer_wrap__2TAji",inner:"Footer_inner__l97wy",nav:"Footer_nav__YglWe",navLink:"Footer_navLink__3hU9B",copyright:"Footer_copyright__3ipED","nav-link":"Footer_nav-link__2bfI6"}},14:function(e,a,t){e.exports={inner:"Header_inner__2rzD1",wrap:"Header_wrap__323Ed",logo:"Header_logo__1On6H",chatInfo:"Header_chatInfo__1Ai6u",chatInfoNumberOf:"Header_chatInfoNumberOf__3EGpr",chatInfoLastMessage:"Header_chatInfoLastMessage__1X1R8"}},17:function(e,a,t){e.exports={wrap:"Login_wrap__1maWs",inner:"Login_inner__DuZ0e",input:"Login_input__3J7qI",btn:"Login_btn__lq-HH"}},18:function(e,a,t){e.exports={wrap:"MessageInput_wrap__1sEft",content:"MessageInput_content__1WO4E",input:"MessageInput_input__2pOzp",btn:"MessageInput_btn__17lhZ"}},2:function(e,a,t){e.exports={wrap:"Message_wrap__3cCAd",message:"Message_message__8rwGc",inner:"Message_inner__6_mus",time:"Message_time__1b142",info:"Message_info__2276t",desc:"Message_desc__3csGN",title:"Message_title__1oiQ5",body:"Message_body__1CEZI",messageLike:"Message_messageLike__1F8pn",messageLikeWrap:"Message_messageLikeWrap__Iw79J",like:"Message_like__2ShJA",myMessage:"Message_myMessage__1Ex2g",myMessageWrap:"Message_myMessageWrap__sbHAA",avatar:"Message_avatar__kxtqF",nav:"Message_nav__2EA8E",deleteBtn:"Message_deleteBtn__1F5ep",editBtn:"Message_editBtn__3GYQ-"}},26:function(e,a,t){e.exports={wrap:"Preloader_wrap__1sVqL",inner:"Preloader_inner__2VW6Y"}},35:function(e,a,t){e.exports=t.p+"static/media/Spinner.315ddeed.svg"},36:function(e,a,t){e.exports=t.p+"static/media/avatar.0a5e7a1f.png"},43:function(e,a,t){e.exports=t(56)},54:function(e,a,t){},56:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(19),c=t.n(r),i=t(10),o=t(11),l=t(3),m=t(40),u=t(17),g=t.n(u),d=function(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),r=t[0],c=t[1],l=e.addUserName;return s.a.createElement("div",{className:g.a.wrap},s.a.createElement("div",{className:g.a.inner},s.a.createElement(o.b,{render:function(e){var a=e.history;return s.a.createElement("input",{type:"text",className:g.a.input,onChange:function(e){return c(e.target.value)},onKeyUp:function(e){return 13===e.keyCode?l(r)&&a.push("/"):null},placeholder:"Please, enter your name"})}}),s.a.createElement(i.b,{to:"/",className:g.a.btn,onClick:function(){return l(r)}},"Login")))},_=t(25),p=t.n(_),E=t(31),f=function(e){return{type:"TOGGLE_IS_FETSHING",isFetching:e}},v={addUserName:function(e){return{type:"ADD_USER_NAME",userName:e}}},h=Object(o.f)(Object(l.b)(function(e){return{}},v)(d)),M=t(32),N=t(33),b=t(41),y=t(34),O=t(42),k=t(26),w=t.n(k),S=t(35),I=t.n(S),j=function(){return s.a.createElement("div",{className:w.a.wrap},s.a.createElement("div",{className:w.a.inner},s.a.createElement("img",{src:I.a,alt:"Spinner"})))},A=t(14),L=t.n(A),D=function(e){var a=e.messages;return s.a.createElement("header",{className:L.a.wrap},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:L.a.inner},s.a.createElement("div",{className:L.a.logo},"My chat"),s.a.createElement("div",{className:L.a.chatInfo},s.a.createElement("div",{className:L.a.chatInfoNumberOf},function(e){var a=new Set;if(e)return e.map(function(e){return a.add(e.user)}),a.size}(a)," users \xa0",a.length," messages"),s.a.createElement("div",{className:L.a.chatInfoLastMessage},"Last message: ",function(e){var a=e.length-1;if(e[a])return e[a].created_at}(a))))))},x=Object(l.b)(function(e){return{messages:e.messages}},{})(D),G=t(2),F=t.n(G),C=function(e){var a=e.toggleLike,t=e.likeMessages,n=e.deleteMessage,r=e.changeMessage;return s.a.createElement("li",{className:e.classWrap},s.a.createElement("div",{className:e.classMessage},s.a.createElement("div",{className:F.a.time},e.createdTime),s.a.createElement("div",{className:F.a.inner},s.a.createElement("div",{className:F.a.info},s.a.createElement("div",{className:e.classAvatar},s.a.createElement("img",{src:e.avatar,alt:"avatar"})),s.a.createElement("div",{className:F.a.desc},s.a.createElement("h2",{className:F.a.title},e.name),s.a.createElement("div",{className:F.a.body},e.message))),s.a.createElement("div",{className:e.classLikeWrap},s.a.createElement("div",{className:t.includes(e.id)?"".concat(F.a.messageLike," ").concat(F.a.like):F.a.messageLike,onClick:function(e){return a(e.target.id)},id:e.id},"\u2665")),s.a.createElement("nav",{className:e.classNav},s.a.createElement("div",{className:F.a.editBtn,id:e.id,title:"edit message",onClick:function(e){return r(e.target.id)}},"edit"),s.a.createElement("div",{id:e.id,onClick:function(e){return n(e.target.id)},className:F.a.deleteBtn,title:"delete message"},"\u2a2f")))))},H={toggleLike:function(e){return{type:"TOGGLE_LIKE",id:e}},deleteMessage:function(e){return{type:"DELETE_MESSAGE",id:e}},changeMessage:function(e){return{type:"CHANGE_MESSAGE",id:e}}},W=Object(l.b)(function(e){return{likeMessages:e.likeMessages}},H)(C),T=t(36),P=t.n(T),B=function(e){var a=e.messages,t=Object(n.useRef)(null);return Object(n.useEffect)(function(){t.current.scrollIntoView({behavior:"smooth"})},[a]),s.a.createElement("section",{className:"chat-list"},s.a.createElement("div",{className:"content"},a?s.a.createElement("ul",{className:"messages-list"},a.map(function(a){return s.a.createElement(W,{classWrap:a.user===e.userName?"".concat(F.a.wrap," ").concat(F.a.myMessageWrap):F.a.wrap,classMessage:a.user===e.userName?"".concat(F.a.message," ").concat(F.a.myMessage):F.a.message,classLikeWrap:a.user===e.userName?"display-none":F.a.messageLikeWrap,classAvatar:a.user===e.userName?"display-none":F.a.avatar,classNav:a.user===e.userName?F.a.nav:"display-none",key:a.id,id:a.id,avatar:a.avatar?a.avatar:P.a,createdTime:a.created_at,name:a.user,message:a.message})})):null,s.a.createElement("div",{ref:t})))},U=Object(l.b)(function(e){return{messages:e.messages,newMessage:e.newMessage,userName:e.userName}},{})(B),Y=t(18),J=t.n(Y),V=function(e){var a=e.addMessage,t=e.message,n=e.sendMessage,r=e.editId,c=e.saveEditedMessage,i=e.editIndex;return s.a.createElement("div",{className:J.a.wrap},s.a.createElement("div",{className:J.a.content},s.a.createElement("input",{className:J.a.input,type:"text",onChange:function(e){return a(e.target.value)},onKeyUp:function(e){return 13===e.keyCode&&r&&t?c(t,i):13===e.keyCode&&t?n(t):null},value:t,placeholder:"Type something..."}),s.a.createElement("button",{className:J.a.btn,onClick:function(){return t&&r?c(t,i):t?n(t):null}},"send")))},q={addMessage:function(e){return{type:"ADD_MESSAGE",message:e}},sendMessage:function(e){return{type:"SEND_MESSAGE",message:e}},saveEditedMessage:function(e,a){return{type:"SAVE_EDITED_MESSAGE",message:e,index:a}}},K=Object(l.b)(function(e){return{message:e.message,editId:e.editId,editIndex:e.editIndex,f:e.f}},q)(V),R=t(12),z=t.n(R),Z=function(){return s.a.createElement("footer",{className:z.a.wrap},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:z.a.inner},s.a.createElement("nav",{className:z.a.nav},s.a.createElement("a",{className:z.a.navLink,href:"#"},"Home"),s.a.createElement("a",{className:z.a.navLink,href:"#"},"About"),s.a.createElement("a",{className:z.a.navLink,href:"#"},"Contact us")),s.a.createElement("div",{className:z.a.copyright},"@ Copyright 2019"))))},Q=function(e){function a(){return Object(M.a)(this,a),Object(b.a)(this,Object(y.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(N.a)(a,[{key:"componentDidMount",value:function(){this.props.getMessages()}},{key:"render",value:function(){var e=this.props.isFetching,a=this.props.userName;return s.a.createElement("div",{className:"chat-wrap"},e?s.a.createElement(j,null):null,a?null:s.a.createElement(o.a,{to:"/login"}),s.a.createElement("main",{className:"main"},s.a.createElement(x,null),s.a.createElement(U,null),s.a.createElement(K,null)),s.a.createElement(Z,null))}}]),a}(s.a.Component),X={getMessages:function(){return function(){var e=Object(E.a)(p.a.mark(function e(a){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(f(!0)),"https://api.dev.buki.com.ua/frontend_test",e.next=5,fetch("https://api.dev.buki.com.ua/frontend_test");case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,a({type:"ADD_MESSAGES",messages:n}),a(f(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(a){return e.apply(this,arguments)}}()},toggleIsFetching:f},$=Object(o.f)(Object(l.b)(function(e){return{isFetching:e.isFetching,messages:e.messages,userName:e.userName}},X)(Q)),ee=function(){return s.a.createElement(i.a,null,s.a.createElement(o.b,{path:"/",exact:!0,component:$}),s.a.createElement(o.b,{path:"/login",exact:!0,component:h}))};t(54);var ae=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(ee,null))},te=t(16),ne=t(37),se=t(13),re=t(38),ce=t(39);function ie(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ie(t,!0).forEach(function(a){Object(re.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var le={userName:!1,messages:!1,message:"",isFetching:!1,newMessage:"",likeMessages:[],editId:!1,editIndex:!1},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_USER_NAME":return oe({},e,{userName:a.userName});case"TOGGLE_IS_FETSHING":return oe({},e,{isFetching:a.isFetching});case"ADD_MESSAGES":return oe({},e,{messages:a.messages});case"ADD_MESSAGE":return oe({},e,{message:a.message});case"SEND_MESSAGE":var t=e.messages.length-1;return oe({},e,{messages:[].concat(Object(se.a)(e.messages),[{id:+[e.messages[t].id]+1,user:e.userName,created_at:ce().format("YYYY-MM-D HH:mm:ss"),message:a.message}]),message:""});case"CHANGE_MESSAGE":for(var n,s=0;s<e.messages.length;s++)+a.id===+e.messages[s].id&&(n=s);var r=e.messages[n]?e.messages[n].message:"";return oe({},e,{editId:a.id,message:r,editIndex:n});case"SAVE_EDITED_MESSAGE":var c=Object(se.a)(e.messages);return c[a.index].message=a.message,oe({},e,{messages:Object(se.a)(c),message:"",editId:!1,editIndex:!1});case"DELETE_MESSAGE":return oe({},e,{messages:Object(se.a)(e.messages.filter(function(e){return+e.id!==+a.id}))});case"TOGGLE_LIKE":if(e.likeMessages.includes(a.id)){var i=e.likeMessages.indexOf(a.id);return oe({},e,{likeMessages:[].concat(Object(se.a)(e.likeMessages.slice(0,i)),Object(se.a)(e.likeMessages.slice(i+1)))})}return oe({},e,{likeMessages:[].concat(Object(se.a)(e.likeMessages),[a.id])});default:return e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(){return Object(te.c)(me,le,Object(te.a)(ne.a))}t.d(a,"configureStore",function(){return ue}),t.d(a,"store",function(){return ge});var ge=ue();c.a.render(s.a.createElement(l.a,{store:ge},s.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.80227969.chunk.js.map